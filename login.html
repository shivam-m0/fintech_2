<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expensify Dashboard</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        // FIX 1: Moved this block after the main Tailwind script load
        tailwind.config = {
            darkMode: 'class', // Enables dark mode by checking for the 'dark' class on the HTML tag
        }
    </script>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
        /* Custom styles to define the font and base background */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s;
        }

        /* Default (Light Mode) Background */
        body {
            background-color: #f3f4f6;
        }
        /* Dark Mode Background */
        .dark body {
            background-color: #111827; /* Tailwind gray-900 */
        }
        
        /* Custom Bar Chart CSS (Mocking the chart in Personalized Tips) */
        .bar-chart-container {
            display: flex;
            align-items: flex-end;
            height: 100px;
            gap: 4px;
        }

        .bar {
            width: 20px;
            background-color: #3b82f6; /* Blue for the bars */
            border-radius: 4px 4px 0 0;
            transition: height 0.3s ease;
        }

        .bar-avg {
            background-color: #10b981; /* Green for the national average indicator */
            width: 4px;
            margin-left: -2px;
            border-radius: 4px;
        }

        /* Custom styling for the logo color */
        .Expensify-logo {
            color: #000; /* Teal/Green color for the 'sify' part */
            font-weight: 700;
        }
        .Expensify-logo-span {
            color: #2196F3; /* Blue color for the 'Expen' part */
            font-weight: 700;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900">

    <div id="login-container" class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-md bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-2xl border border-gray-100 dark:border-gray-700">
            <div class="text-center mb-8">
                <div class="text-4xl font-extrabold mb-1">
                    <span class="Expensify-logo-span">Expen</span><span class="Expensify-logo">sify</span>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Welcome Back!</h2>
                <p class="text-gray-500 dark:text-gray-400">Sign in to manage your financial world.</p>
            </div>

            <form id="login-form" class="space-y-6">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email Address</label>
                    <input type="email" id="email" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500" required placeholder="you@example.com" value="jane.doe@Expensify.com">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Password</label>
                    <input type="password" id="password" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500" required placeholder="********" value="password">
                </div>
                <button type="submit" class="w-full py-3 font-bold text-white bg-blue-600 dark:bg-blue-500 rounded-xl hover:bg-blue-700 dark:hover:bg-blue-600 transition duration-300 shadow-md">
                    Log In
                </button>
            </form>

            <p class="mt-6 text-center text-sm text-gray-500 dark:text-gray-400">
                Don't have an account? <a href="#" id="show-signup" class="text-teal-500 hover:text-teal-400 font-semibold">Sign Up</a>
            </p>
        </div>
    </div>

    <div id="signup-container" class="min-h-screen flex items-center justify-center p-4 hidden">
        <div class="w-full max-w-md bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-2xl border border-gray-100 dark:border-gray-700">
            <div class="text-center mb-8">
                <div class="text-4xl font-extrabold mb-1">
                    <span class="Expensify-logo-span">Expen</span><span class="Expensify-logo">sify</span>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Create Your Account</h2>
                <p class="text-gray-500 dark:text-gray-400">Start your journey to financial intelligence.</p>
            </div>

            <form id="signup-form" class="space-y-6">
                <div>
                    <label for="signup-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Full Name</label>
                    <input type="text" id="signup-name" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm focus:border-teal-500 focus:ring-teal-500" required placeholder="Jane Doe">
                </div>
                <div>
                    <label for="signup-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email Address</label>
                    <input type="email" id="signup-email" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm focus:border-teal-500 focus:ring-teal-500" required placeholder="you@example.com">
                </div>
                <div>
                    <label for="signup-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Password</label>
                    <input type="password" id="signup-password" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm focus:border-teal-500 focus:ring-teal-500" required placeholder="Must be 8+ characters">
                </div>
                <div>
                    <label for="signup-confirm-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Confirm Password</label>
                    <input type="password" id="signup-confirm-password" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm focus:border-teal-500 focus:ring-teal-500" required placeholder="Re-enter password">
                </div>
                <button type="submit" class="w-full py-3 font-bold text-white bg-teal-600 dark:bg-teal-500 rounded-xl hover:bg-teal-700 dark:hover:bg-teal-600 transition duration-300 shadow-md">
                    Sign Up
                </button>
            </form>

            <p class="mt-6 text-center text-sm text-gray-500 dark:text-gray-400">
                Already have an account? <a href="#" id="show-login" class="text-blue-500 hover:text-blue-400 font-semibold">Log In</a>
            </p>
        </div>
    </div>


    <div id="app-shell" class="max-w-7xl mx-auto bg-white dark:bg-gray-800 rounded-3xl shadow-xl overflow-hidden hidden">
        
        <header class="flex justify-between items-center p-6 border-b border-gray-100 dark:border-gray-700">
            <div class="text-2xl font-bold">
                <span class="Expensify-logo-span">Expen</span><span class="Expensify-logo">sify</span>
                <p class="text-xs font-normal text-gray-500 dark:text-gray-400 mt-0.5">Smart Money. Smarter You.</p>
            </div>
            
            <div class="flex items-center space-x-2">
                <button id="themeToggle" class="text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white p-2 rounded-full transition duration-150">
                    <i data-lucide="moon" class="w-6 h-6"></i>
                </button>
                
                <button id="logoutButton" class="text-gray-600 dark:text-gray-300 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-full transition duration-150" title="Logout">
                    <i data-lucide="log-out" class="w-6 h-6"></i>
                </button>
                
            </div>
        </header>

        <div class="flex flex-col md:flex-row">
            
            <nav class="w-full md:w-64 p-6 border-b md:border-b-0 md:border-r border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800">
                <ul class="space-y-3" id="main-nav-links">
                    <li>
                        <a href="#" data-target="dashboard" class="nav-link flex items-center space-x-3 p-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl font-medium transition duration-150">
                            <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-target="expenses" class="nav-link flex items-center space-x-3 p-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl font-medium transition duration-150">
                            <i data-lucide="dollar-sign" class="w-5 h-5"></i>
                            <span>Expenses</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-target="tools" class="nav-link flex items-center space-x-3 p-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl font-medium transition duration-150">
                            <i data-lucide="package-search" class="w-5 h-5"></i>
                            <span>Tools</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-target="upcoming" class="nav-link flex items-center space-x-3 p-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl font-medium transition duration-150">
                            <i data-lucide="sparkles" class="w-5 h-5"></i>
                            <span>Upcoming</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-target="learn" class="nav-link flex items-center space-x-3 p-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl font-medium transition duration-150">
                            <i data-lucide="book-open" class="w-5 h-5"></i>
                            <span>Learn</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-target="settings" class="nav-link flex items-center space-x-3 p-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition duration-150">
                            <i data-lucide="settings" class="w-5 h-5"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <main class="flex-1 p-6">

                <div id="page-dashboard" data-page="dashboard" class="hidden">
                    <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-8 border-b pb-4 text-blue-600 dark:text-blue-400">
                        Financial Overview
                    </h1>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

                        <div class="lg:col-span-7 bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <h2 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-6">MONTHLY SPENDING BREAKDOWN</h2>
                            <div class="flex flex-col md:flex-row items-center justify-between">
                                
                                <div class="flex-shrink-0 mb-6 md:mb-0 w-full max-w-[180px] h-[180px] mr-8">
                                    <canvas id="spendingChart" class="w-full h-full"></canvas>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-300" id="spending-legend">
                                    <p class="text-center text-gray-500 dark:text-gray-400 col-span-2">Loading data...</p>
                                </div>
                            </div>
                        </div>

                        <div class="lg:col-span-5 bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <h2 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4">FINANCIAL HISTORY</h2>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">Spending, Earning, and Saving Over 6 Months</p>
                            <div class="h-64">
                                <canvas id="historyChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-6 mt-6">

                        <div class="lg:col-span-3 bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <p class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">CURRENT BALANCE</p>
                            <p class="text-3xl font-extrabold text-blue-600 dark:text-blue-400">
                                <span class="font-sans">₹</span>45,800
                            </p>
                        </div>

                        <div class="lg:col-span-3 bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <p class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">MONTHLY SPENDING</p>
                            <p id="dashboard-monthly-spending" class="text-3xl font-extrabold text-teal-600 dark:text-teal-400">
                                <span class="font-sans">₹</span>18,200
                            </p>
                        </div>

                        <div class="lg:col-span-3 bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <p class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">SAVINGS GOAL</p>
                            <p class="text-3xl font-extrabold text-indigo-600 dark:text-indigo-400">
                                <span class="font-sans">₹</span>15,000 / 30,000
                            </p>
                        </div>

                        <div class="lg:col-span-3 bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <h2 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center">
                                <i data-lucide="lightbulb" class="w-5 h-5 text-yellow-500 mr-2"></i>
                                Personalized Tips
                            </h2>
                            
                            <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">
                                <span class="font-bold text-teal-600 dark:text-teal-400">AI INSIGHT:</span> You spent 20% more on dining this month than last. Try packing lunch to work this week.
                            </p>

                            <div class="mb-2">
                                <p class="text-xs font-medium text-gray-500 dark:text-gray-400">Your Spending vs. National Average</p>
                                <div class="bar-chart-container">
                                    <div class="relative flex flex-col items-center"><div class="bar h-8"></div><div class="bar-avg h-10 absolute bottom-0 left-1/2 -ml-0.5"></div></div>
                                    <div class="relative flex flex-col items-center"><div class="bar h-12"></div><div class="bar-avg h-10 absolute bottom-0 left-1/2 -ml-0.5"></div></div>
                                    <div class="relative flex flex-col items-center"><div class="bar h-16"></div><div class="bar-avg h-10 absolute bottom-0 left-1/2 -ml-0.5"></div></div>
                                    <div class="relative flex flex-col items-center"><div class="bar h-24"></div><div class="bar-avg h-10 absolute bottom-0 left-1/2 -ml-0.5"></div></div>
                                    <div class="relative flex flex-col items-center"><div class="bar h-28 bg-blue-600"></div><div class="bar-avg h-20 absolute bottom-0 left-1/2 -ml-0.5"></div></div>
                                </div>
                                <div class="flex justify-between text-xs text-gray-400 dark:text-gray-500 mt-1">
                                    <span>Q1</span><span>Q2</span><span>Q3</span><span>Q4</span><span>This Month</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="page-expenses" data-page="expenses" class="hidden">
                    <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-8 border-b pb-4 text-blue-600 dark:text-blue-400">
                        Expense Manager
                    </h1>

                    <div class="grid lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1 bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600 h-fit">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                <i data-lucide="plus-circle" class="w-5 h-5 mr-2 text-blue-600 dark:text-blue-400"></i>
                                Log New Transaction
                            </h3>
                            <form id="expense-form" class="space-y-4">
                                <div>
                                    <label for="expense-amount" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Amount (<span class="font-sans">₹</span>)</label>
                                    <input type="number" id="expense-amount" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500" required placeholder="500.00" step="0.01" min="0">
                                </div>
                                <div>
                                    <label for="expense-category" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Category</label>
                                    <select id="expense-category" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                        <option value="Food & Dining">Food & Dining</option>
                                        <option value="Rent & Bills">Rent & Bills</option>
                                        <option value="Transport">Transport</option>
                                        <option value="Entertainment">Entertainment</option>
                                        <option value="Utilities">Utilities</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="expense-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label>
                                    <input type="text" id="expense-description" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500" required placeholder="Monthly gym fee">
                                </div>
                                <div>
                                    <label for="expense-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Date</label>
                                    <input type="date" id="expense-date" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                </div>
                                <button type="submit" class="w-full py-2 font-bold text-white bg-blue-600 dark:bg-blue-500 rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition duration-300">
                                    Add Expense
                                </button>
                            </form>
                        </div>

                        <div class="lg:col-span-2 space-y-6">
                            <div class="grid sm:grid-cols-3 gap-6">
                                <div class="bg-white dark:bg-gray-700 p-5 rounded-xl shadow-custom border-l-4 border-blue-500 dark:border-blue-400">
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Total Spent (30 Days)</p>
                                    <p id="total-spent" class="text-3xl font-extrabold text-gray-900 dark:text-white mt-1">₹0.00</p>
                                </div>
                                <div class="bg-white dark:bg-gray-700 p-5 rounded-xl shadow-custom border-l-4 border-teal-500 dark:border-teal-400">
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Highest Expense</p>
                                    <p id="highest-expense" class="text-3xl font-extrabold text-gray-900 dark:text-white mt-1">₹0.00</p>
                                </div>
                                <div class="bg-white dark:bg-gray-700 p-5 rounded-xl shadow-custom border-l-4 border-indigo-500 dark:border-indigo-400">
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Transactions Logged</p>
                                    <p id="transaction-count" class="text-3xl font-extrabold text-gray-900 dark:text-white mt-1">0</p>
                                </div>
                            </div>

                            <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4">Recent Transactions</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-600">
                                        <thead class="bg-gray-50 dark:bg-gray-800">
                                            <tr>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Date</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Description</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Category</th>
                                                <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody id="transaction-list" class="bg-white dark:bg-gray-700 divide-y divide-gray-200 dark:divide-gray-600">
                                            </tbody>
                                    </table>
                                </div>
                                <p id="no-transactions" class="text-center text-gray-500 dark:text-gray-400 py-8">No transactions added yet.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="page-tools" data-page="tools" class="hidden">
                    <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-8 border-b pb-4 text-blue-600 dark:text-blue-400">
                        Financial Tools & Calculators
                    </h1>

                    <div class="space-y-8">

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                <i data-lucide="landmark" class="w-5 h-5 mr-2 text-blue-500"></i> Loan EMI Calculator
                            </h3>
                            <div class="grid md:grid-cols-2 gap-6 items-start">
                                <form id="emi-form" class="space-y-4">
                                    <div>
                                        <label for="loan-amount" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Loan Amount (<span class="font-sans">₹</span>)</label>
                                        <input type="number" id="loan-amount" class="mt-1 block w-full rounded-lg" value="1000000" step="10000">
                                    </div>
                                    <div>
                                        <label for="interest-rate" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Interest Rate (% p.a.)</label>
                                        <input type="number" id="interest-rate" class="mt-1 block w-full rounded-lg" value="8.5" step="0.1">
                                    </div>
                                    <div>
                                        <label for="loan-tenure" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Loan Tenure (Years)</label>
                                        <input type="number" id="loan-tenure" class="mt-1 block w-full rounded-lg" value="10" step="1">
                                    </div>
                                </form>
                                <div class="bg-blue-50 dark:bg-gray-800 p-6 rounded-xl space-y-4">
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Monthly EMI</p>
                                        <p id="emi-result" class="text-3xl font-extrabold text-blue-600 dark:text-blue-400">₹0</p>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600 dark:text-gray-300">Total Interest Payable</span>
                                        <span id="total-interest-result" class="font-bold text-gray-800 dark:text-white">₹0</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600 dark:text-gray-300">Total Payment</span>
                                        <span id="total-payment-result" class="font-bold text-gray-800 dark:text-white">₹0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                <i data-lucide="piggy-bank" class="w-5 h-5 mr-2 text-teal-500"></i> Savings Goal Planner
                            </h3>
                            <div class="grid md:grid-cols-2 gap-6 items-start">
                                <form id="savings-form" class="space-y-4">
                                    <div>
                                        <label for="goal-amount" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Goal Amount (<span class="font-sans">₹</span>)</label>
                                        <input type="number" id="goal-amount" class="mt-1 block w-full rounded-lg" value="500000" step="10000">
                                    </div>
                                    <div>
                                        <label for="initial-savings" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Initial Savings (<span class="font-sans">₹</span>)</label>
                                        <input type="number" id="initial-savings" class="mt-1 block w-full rounded-lg" value="50000" step="1000">
                                    </div>
                                    <div>
                                        <label for="monthly-contribution" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Monthly Contribution (<span class="font-sans">₹</span>)</label>
                                        <input type="number" id="monthly-contribution" class="mt-1 block w-full rounded-lg" value="10000" step="500">
                                    </div>
                                    <div>
                                        <label for="annual-return" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Expected Annual Return (%)</label>
                                        <input type="number" id="annual-return" class="mt-1 block w-full rounded-lg" value="10" step="0.5">
                                    </div>
                                </form>
                                <div class="bg-teal-50 dark:bg-gray-800 p-6 rounded-xl text-center flex flex-col justify-center h-full">
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Time to Reach Your Goal</p>
                                    <p id="savings-time-result" class="text-3xl font-extrabold text-teal-600 dark:text-teal-400 mt-2">--</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-300 mt-2">Calculations include the power of compounding.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                <i data-lucide="umbrella" class="w-5 h-5 mr-2 text-indigo-500"></i> Retirement Planner
                            </h3>
                            <div class="grid md:grid-cols-2 gap-6 items-start">
                                <form id="retirement-form" class="space-y-4">
                                    <div>
                                        <label for="current-age" class="block text-sm font-medium">Current Age</label>
                                        <input type="number" id="current-age" class="mt-1 block w-full rounded-lg" value="30">
                                    </div>
                                    <div>
                                        <label for="retirement-age" class="block text-sm font-medium">Retirement Age</label>
                                        <input type="number" id="retirement-age" class="mt-1 block w-full rounded-lg" value="60">
                                    </div>
                                    <div>
                                        <label for="monthly-expenses" class="block text-sm font-medium">Current Monthly Expenses (<span class="font-sans">₹</span>)</label>
                                        <input type="number" id="monthly-expenses" class="mt-1 block w-full rounded-lg" value="50000" step="1000">
                                    </div>
                                    <div>
                                        <label for="existing-corpus" class="block text-sm font-medium">Existing Retirement Corpus (<span class="font-sans">₹</span>)</label>
                                        <input type="number" id="existing-corpus" class="mt-1 block w-full rounded-lg" value="1000000" step="50000">
                                    </div>
                                </form>
                                <div class="bg-indigo-50 dark:bg-gray-800 p-6 rounded-xl space-y-4">
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Estimated Retirement Corpus Needed</p>
                                        <p id="retirement-corpus-result" class="text-3xl font-extrabold text-indigo-600 dark:text-indigo-400">₹0</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">(Assuming 6% inflation & 8% pre-retirement returns)</p>
                                    </div>
                                    <div class="mt-4">
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Required Monthly Investment</p>
                                        <p id="required-sip-result" class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">₹0</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                <i data-lucide="scale" class="w-5 h-5 mr-2 text-yellow-500"></i> Net Worth Comparator (India)
                            </h3>
                            <div class="grid md:grid-cols-2 gap-6 items-start">
                                <div class="space-y-6">
                                    <form class="space-y-4">
                                        <div>
                                            <label for="tools-assets" class="block text-sm font-medium">Total Assets (<span class="font-sans">₹</span>)</label>
                                            <input type="number" id="tools-assets" class="mt-1 block w-full rounded-lg" value="4500000">
                                        </div>
                                        <div>
                                            <label for="tools-liabilities" class="block text-sm font-medium">Total Liabilities (<span class="font-sans">₹</span>)</label>
                                            <input type="number" id="tools-liabilities" class="mt-1 block w-full rounded-lg" value="1200000">
                                        </div>
                                    </form>
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Your Calculated Net Worth</p>
                                        <p id="net-worth-result" class="text-4xl font-extrabold text-teal-600 dark:text-teal-400">₹33,00,000</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1" id="net-worth-details">Assets: ₹45,00,000 - Liabilities: ₹12,00,000</p>
                                    </div>
                                </div>
                                <div class="bg-yellow-50 dark:bg-gray-800 p-6 rounded-xl">
                                    <h4 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-4">Indian Net Worth Benchmarks</h4>
                                    <div class="space-y-3">
                                        <div class="flex justify-between items-center py-2 border-b">
                                            <p>Average Indian Net Worth</p><p class="font-bold">₹8,00,000</p>
                                        </div>
                                        <div class="flex justify-between items-center py-2 border-b bg-blue-50 dark:bg-blue-900/20 rounded-lg px-2">
                                            <p class="font-semibold">Top 10% Threshold</p><p class="font-bold text-blue-600 dark:text-blue-400">₹25,00,000</p>
                                        </div>
                                        <div class="flex justify-between items-center py-2">
                                            <p>Top 1% Threshold</p><p class="font-bold">₹1,00,00,000</p>
                                        </div>
                                        <p id="net-worth-comparison" class="text-center text-sm text-teal-600 dark:text-teal-400 font-bold mt-4">
                                            You are in the top 10% for net worth in India. Great job!
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                
                <div id="page-upcoming" data-page="upcoming" class="hidden">
                    <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-8 border-b pb-4">
                        Upcoming Features
                    </h1>
                    
                    <div class="bg-gray-50 dark:bg-gray-900/30 p-6 rounded-2xl shadow-md mb-8 border border-gray-100 dark:border-gray-800/50">
                        <div class="flex items-start space-x-4">
                            <i data-lucide="rocket" class="w-8 h-8 text-indigo-600 dark:text-indigo-400 mt-1 flex-shrink-0"></i>
                            <div>
                                <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100">The Future of Expensify is Bright!</h2>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">
                                    We're constantly working on new features to make Expensify the smartest financial companion you've ever had. Here's a sneak peek at what's on our roadmap.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <div class="flex justify-between items-start mb-4">
                                <i data-lucide="brain-circuit" class="w-8 h-8 text-blue-600 dark:text-blue-400"></i>
                                <span class="text-xs font-bold py-1 px-2.5 rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">In Development</span>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">AI-Powered Forecasting</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm">
                                Our AI will analyze your spending habits to predict your future account balance, identify potential shortfalls, and offer proactive advice to keep you on track.
                            </p>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <div class="flex justify-between items-start mb-4">
                                <i data-lucide="banknote" class="w-8 h-8 text-teal-600 dark:text-teal-400"></i>
                                <span class="text-xs font-bold py-1 px-2.5 rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">In Development</span>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Automated Bank Sync</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm">
                                Securely connect your bank accounts to automatically import and categorize transactions. No more manual entry—just a complete, real-time view of your finances.
                            </p>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <div class="flex justify-between items-start mb-4">
                                <i data-lucide="receipt" class="w-8 h-8 text-indigo-600 dark:text-indigo-400"></i>
                                <span class="text-xs font-bold py-1 px-2.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300">Planned</span>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Bill Payment Reminders</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm">
                                Never miss a due date again. Expensify will identify upcoming bills from your transactions and send you timely reminders to avoid late fees.
                            </p>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <div class="flex justify-between items-start mb-4">
                                <i data-lucide="repeat" class="w-8 h-8 text-pink-600 dark:text-pink-400"></i>
                                <span class="text-xs font-bold py-1 px-2.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300">Planned</span>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Subscription Management</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm">
                                Automatically detect all your recurring subscriptions (Netflix, Spotify, etc.) in one place. Easily spot and cancel services you no longer use.
                            </p>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <div class="flex justify-between items-start mb-4">
                                <i data-lucide="gauge-circle" class="w-8 h-8 text-red-600 dark:text-red-400"></i>
                                <span class="text-xs font-bold py-1 px-2.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300">Planned</span>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Credit Score Integration</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm">
                                Keep track of your credit score directly within Expensify. Get alerts on changes and tips on how to improve your score to unlock better financial products.
                            </p>
                        </div>
                        
                         <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                            <div class="flex justify-between items-start mb-4">
                                <i data-lucide="bitcoin" class="w-8 h-8 text-yellow-500"></i>
                                <span class="text-xs font-bold py-1 px-2.5 rounded-full bg-gray-200 text-gray-800 dark:bg-gray-900 dark:text-gray-300">Exploring</span>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Web3 & Crypto Wallets</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm">
                                We are exploring ways to integrate popular crypto wallets to give you a complete picture of your net worth, including your digital assets.
                            </p>
                        </div>
                    </div>
                </div>

                <div id="page-learn" data-page="learn" class="hidden">
                    <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-8 border-b pb-4">
                        Financial Learning Hub
                    </h1>
                    
                    <div class="bg-blue-50 dark:bg-blue-900/30 p-6 rounded-2xl shadow-md mb-8 border border-blue-100 dark:border-blue-800/50">
                        <div class="flex items-start space-x-4">
                            <i data-lucide="graduation-cap" class="w-8 h-8 text-blue-600 dark:text-blue-400 mt-1 flex-shrink-0"></i>
                            <div>
                                <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100">Welcome to Expensify Academy!</h2>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">
                                    Level up your financial knowledge with curated lessons, from mastering budgets to building wealth.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600 transition duration-300 hover:shadow-xl hover:scale-[1.01]">
                            <i data-lucide="wallet" class="w-8 h-8 text-teal-600 dark:text-teal-400 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Budgeting 101: The Basics</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">
                                Learn the fundamental rules of money management, how to track expenses, and create a sustainable budget.
                            </p>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span><i data-lucide="clock" class="w-3 h-3 inline-block mr-1"></i> 4 Lessons</span>
                                <a href="#" class="text-blue-600 dark:text-blue-400 font-medium hover:underline flex items-center">
                                    Start Course <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600 transition duration-300 hover:shadow-xl hover:scale-[1.01]">
                            <i data-lucide="trending-up" class="w-8 h-8 text-blue-600 dark:text-blue-400 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Investing Basics: Get Started</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">
                                Demystify stocks, mutual funds, and retirement accounts. Understand risk tolerance and diversification.
                            </p>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span><i data-lucide="clock" class="w-3 h-3 inline-block mr-1"></i> 6 Lessons</span>
                                <a href="#" class="text-blue-600 dark:text-blue-400 font-medium hover:underline flex items-center">
                                    Start Course <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600 transition duration-300 hover:shadow-xl hover:scale-[1.01]">
                            <i data-lucide="credit-card" class="w-8 h-8 text-red-600 dark:text-red-400 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Debt Management & Credit</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">
                                Strategies for tackling debt (Avalanche vs. Snowball), improving your credit score, and using credit wisely.
                            </p>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span><i data-lucide="clock" class="w-3 h-3 inline-block mr-1"></i> 5 Lessons</span>
                                <a href="#" class="text-blue-600 dark:text-blue-400 font-medium hover:underline flex items-center">
                                    Start Course <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600 transition duration-300 hover:shadow-xl hover:scale-[1.01]">
                            <i data-lucide="users" class="w-8 h-8 text-indigo-600 dark:text-indigo-400 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Advanced: Retirement Planning</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">
                                Deep dive into retirement vehicles (401k, Roth IRA, NPS), withdrawal strategies, and securing your future.
                            </p>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span><i data-lucide="clock" class="w-3 h-3 inline-block mr-1"></i> 8 Lessons</span>
                                <a href="#" class="text-blue-600 dark:text-blue-400 font-medium hover:underline flex items-center">
                                    Start Course <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600 transition duration-300 hover:shadow-xl hover:scale-[1.01]">
                            <i data-lucide="file-text" class="w-8 h-8 text-yellow-600 dark:text-yellow-400 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Tax Efficiency</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">
                                Understand tax deductions, credits, and how to structure your investments for maximum tax savings.
                            </p>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span><i data-lucide="clock" class="w-3 h-3 inline-block mr-1"></i> 3 Lessons</span>
                                <a href="#" class="text-blue-600 dark:text-blue-400 font-medium hover:underline flex items-center">
                                    Start Course <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600 transition duration-300 hover:shadow-xl hover:scale-[1.01]">
                            <i data-lucide="home" class="w-8 h-8 text-pink-600 dark:text-pink-400 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">Real Estate Investment</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">
                                Exploring property as an asset class, understanding mortgages, and calculating rental yields.
                            </p>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span><i data-lucide="clock" class="w-3 h-3 inline-block mr-1"></i> 7 Lessons</span>
                                <a href="#" class="text-blue-600 dark:text-blue-400 font-medium hover:underline flex items-center">
                                    Start Course <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>

                    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mt-12 mb-6">Featured Lesson: The Power of Compounding</h2>
                    <div class="bg-white dark:bg-gray-700 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                        <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-8 items-center">
                            <div class="md:w-2/3">
                                <h3 class="text-xl font-extrabold text-blue-600 dark:text-blue-400 mb-3">Lesson: The Eighth Wonder of the World</h3>
                                <p class="text-gray-600 dark:text-gray-300 mb-4">
                                    Albert Einstein called **compound interest** the eighth wonder of the world. This lesson breaks down how earning returns on your returns accelerates wealth building over time, especially when starting early.
                                </p>
                                <a href="#" class="inline-flex items-center px-4 py-2 bg-teal-500 text-white font-medium rounded-lg hover:bg-teal-600 transition duration-150">
                                    <i data-lucide="play" class="w-5 h-5 mr-2 fill-white"></i>
                                    Watch Video Tutorial (12 min)
                                </a>
                            </div>
                            <div class="md:w-1/3 bg-gray-50 dark:bg-gray-800 p-4 rounded-xl text-center">
                                <i data-lucide="bar-chart-3" class="w-10 h-10 mx-auto text-yellow-500 mb-2"></i>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Time is your biggest asset. Starting at age 25 vs. 35 can make a difference of 50% in total future value.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="page-settings" data-page="settings" class="hidden">
                    <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-8 border-b pb-4 text-blue-600 dark:text-blue-400">
                        Account Settings
                    </h1>
                    
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="space-y-6">
                            <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                    <i data-lucide="user" class="w-5 h-5 mr-2 text-teal-500"></i>
                                    User Profile
                                </h3>
                                <form class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Full Name</label>
                                        <input type="text" value="Jane Doe" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email Address</label>
                                        <input type="email" value="jane.doe@Expensify.com" disabled class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm cursor-not-allowed">
                                    </div>
                                    <button type="submit" class="py-2 px-4 text-sm font-bold text-white bg-blue-600 dark:bg-blue-500 rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition duration-300">Save Profile</button>
                                </form>
                            </div>

                            <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                    <i data-lucide="bell" class="w-5 h-5 mr-2 text-indigo-500"></i>
                                    Notification Preferences
                                </h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-700 dark:text-gray-300">Budget Overrun Alerts</span>
                                        <input type="checkbox" checked class="h-5 w-5 rounded text-blue-600 border-gray-300 focus:ring-blue-500 dark:bg-gray-800">
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-700 dark:text-gray-300">Weekly Summary Email</span>
                                        <input type="checkbox" checked class="h-5 w-5 rounded text-blue-600 border-gray-300 focus:ring-blue-500 dark:bg-gray-800">
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-700 dark:text-gray-300">Security Login Alerts</span>
                                        <input type="checkbox" class="h-5 w-5 rounded text-blue-600 border-gray-300 focus:ring-blue-500 dark:bg-gray-800">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                    <i data-lucide="lock" class="w-5 h-5 mr-2 text-red-500"></i>
                                    Security & Access
                                </h3>
                                <button class="w-full py-2 font-bold text-white bg-red-600 dark:bg-red-500 rounded-lg hover:bg-red-700 dark:hover:bg-red-600 transition duration-300 mb-3">
                                    Change Password
                                </button>
                                <button class="w-full py-2 font-bold text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-300">
                                    Enable Two-Factor Auth
                                </button>
                            </div>

                            <div class="bg-white dark:bg-gray-700 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-600">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                                    <i data-lucide="database" class="w-5 h-5 mr-2 text-yellow-500"></i>
                                    Data Management
                                </h3>
                                <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">
                                    Export your transaction data for tax or external analysis.
                                </p>
                                <button class="w-full py-2 font-bold text-white bg-yellow-600 dark:bg-yellow-500 rounded-lg hover:bg-yellow-700 dark:hover:bg-yellow-600 transition duration-300">
                                    Export All Data (CSV)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 pt-4 text-center border-t border-gray-100 dark:border-gray-700">
                    <button id="w30Button" class="text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 transition duration-150 hover:underline">
                        W3.0 Integration Status
                    </button>
                </div>
            </main>
        </div>

    </div>

    <div id="messageBox" class="fixed bottom-4 right-4 bg-gray-900 text-white p-4 rounded-xl shadow-2xl transition-all duration-300 transform translate-x-full opacity-0 z-50">
        <p class="font-bold">Feature Status</p>
        <p class="text-sm">Web3.0 Integration - Coming Soon!</p>
    </div>

    <script>
        // --- Core Initialization ---
        // Initialize Lucide icons FIRST
        lucide.createIcons();
        
        // --- Global State ---
        let isLoggedIn = false;
        let currentPage = 'dashboard'; 
        let transactions = [
            { amount: 1500, category: 'Food & Dining', description: 'Weekly food shopping', date: '2025-10-15' },
            { amount: 8000, category: 'Rent & Bills', description: 'Monthly studio rent', date: '2025-10-01' },
            { amount: 450, category: 'Entertainment', description: 'Netflix subscription', date: '2025-10-02' },
            { amount: 1000, category: 'Transport', description: 'Bus pass renewal', date: '2025-10-10' },
            { amount: 500, category: 'Food & Dining', description: 'Restaurant dinner', date: '2025-10-18' },
            { amount: 1200, category: 'Utilities', description: 'Electricity bill', date: '2025-10-20' },
        ]; 
        
        // --- Category Mapping for Dashboard Chart ---
        const categoryMap = {
            'Food & Dining': 'Food & Dining',
            'Rent & Bills': 'Rent & Bills',
            'Transport': 'Transport',
            'Entertainment': 'Other', // Grouping smaller ones into 'Other' for cleaner chart
            'Utilities': 'Rent & Bills', // Grouping utilities with rent for the demo chart
            'Other': 'Other'
        };

        // --- Chart.js Instances (FIX: Moved chart declarations to global scope) ---
        let spendingChartInstance = null;
        let historyChartInstance = null;
        
        // --- View Elements ---
        const loginContainer = document.getElementById('login-container');
        const signupContainer = document.getElementById('signup-container'); 
        const appShell = document.getElementById('app-shell');
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const dashboardMonthlySpendingEl = document.getElementById('dashboard-monthly-spending');
        const spendingLegendEl = document.getElementById('spending-legend');
        
        // Function to calculate total spending for the last 30 days or current month
        function calculateMonthlySpending() {
            // Simplified: calculate all spending in the transactions array for demo
            return transactions.reduce((sum, tx) => sum + tx.amount, 0);
        }

        function calculateSpendingByCategory() {
            const spendingData = {
                'Food & Dining': 0,
                'Rent & Bills': 0,
                'Transport': 0,
                'Other': 0,
            };

            transactions.forEach(tx => {
                const mappedCategory = categoryMap[tx.category] || 'Other';
                if (spendingData.hasOwnProperty(mappedCategory)) {
                    spendingData[mappedCategory] += tx.amount;
                } else {
                    spendingData['Other'] += tx.amount;
                }
            });

            return spendingData;
        }

        // --- Authentication/View Management Logic ---

        function renderAuthView(view) {
            if (view === 'login') {
                loginContainer.classList.remove('hidden');
                signupContainer.classList.add('hidden');
            } else if (view === 'signup') {
                loginContainer.classList.add('hidden');
                signupContainer.classList.remove('hidden');
            }
        }

        function toggleLoginStatus(status) {
            isLoggedIn = status;
            
            if (isLoggedIn) {
                loginContainer.classList.add('hidden');
                signupContainer.classList.add('hidden'); // Ensure signup is also hidden
                appShell.classList.remove('hidden');
                // Render the dashboard immediately upon successful login
                renderPage('dashboard');
            } else {
                appShell.classList.add('hidden');
                // Show the login form when logging out
                renderAuthView('login');
            }
        }

        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // SIMULATED AUTH: Accept any non-empty fields for demo
            if (email && password) {
                console.log("Attempting login...");
                // Simulate success
                setTimeout(() => {
                    console.log("Login successful.");
                    toggleLoginStatus(true);
                }, 500);
            } else {
                console.error("Please enter email and password.");
            }
        }
        
        // NEW: Signup Handler
        function handleSignup(event) {
            event.preventDefault();
            
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;

            if (!name || !email || !password || !confirmPassword) {
                console.error("Please fill in all fields.");
                // Use the message box for user feedback
                showMessage("Registration Failed", "Please fill in all required fields.", 'bg-red-500');
                return;
            }
            if (password.length < 8) {
                console.error("Password must be at least 8 characters.");
                showMessage("Registration Failed", "Password must be at least 8 characters.", 'bg-red-500');
                return;
            }
            if (password !== confirmPassword) {
                console.error("Passwords do not match.");
                showMessage("Registration Failed", "Passwords do not match.", 'bg-red-500');
                return;
            }

            // SIMULATED AUTH: 
            console.log(`Attempting sign up for ${email}...`);
            // Simulate success
            setTimeout(() => {
                console.log("Sign up successful. Redirecting to login.");
                document.getElementById('signup-form').reset();
                
                showMessage("Success!", "Account created. Please log in.", 'bg-teal-600');
                
                // Switch to login page after message disappears
                setTimeout(() => {
                    renderAuthView('login');
                }, 3000);
                
            }, 500);
        }

        const logoutButton = document.getElementById('logoutButton');
        logoutButton.addEventListener('click', () => {
            console.log("User logging out.");
            toggleLoginStatus(false);
            // Show a logout message
            showMessage("Logged Out", "You have been successfully logged out.", 'bg-blue-600');
        });
        
        // Custom Message Box function
        function showMessage(title, message, bgColor) {
            messageBox.querySelector('p:first-child').textContent = title;
            messageBox.querySelector('p:last-child').textContent = message;
            
            // Reset background and apply new one
            messageBox.className = "fixed bottom-4 right-4 text-white p-4 rounded-xl shadow-2xl transition-all duration-300 transform translate-x-full opacity-0 z-50";
            messageBox.classList.add(bgColor || 'bg-gray-900');

            // Show the box (Slide in and fade in)
            messageBox.classList.remove('translate-x-full', 'opacity-0');
            messageBox.classList.add('translate-x-0', 'opacity-100');

            // Hide the box after 3 seconds (Slide out and fade out)
            setTimeout(() => {
                messageBox.classList.remove('translate-x-0', 'opacity-100');
                messageBox.classList.add('translate-x-full', 'opacity-0');
            }, 3000);
        }

        // --- Dark Mode Logic (MODIFIED FOR LIGHT DEFAULT) ---

        function updateTheme(isDark) {
            const icon = themeToggle.querySelector('i');
            
            if (icon) {
                if (isDark) {
                    html.classList.add('dark');
                    html.classList.remove('light');
                    icon.setAttribute('data-lucide', 'sun'); 
                    localStorage.setItem('theme', 'dark');
                } else {
                    html.classList.remove('dark');
                    html.classList.add('light');
                    icon.setAttribute('data-lucide', 'moon'); 
                    localStorage.setItem('theme', 'light');
                }
                lucide.createIcons();
            } else {
                if (isDark) { html.classList.add('dark'); } 
                else { html.classList.remove('dark'); }
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            }
            
            // Re-render views on theme change
            if (currentPage === 'expenses') {
                renderExpenses();
            }
            if (currentPage === 'dashboard' && isLoggedIn) {
                drawCharts(); 
                updateDashboardMetrics(); // Also update dashboard metrics on theme change
            }
        }

        // Initial Load: Check for saved preference or FORCE LIGHT MODE
        const savedTheme = localStorage.getItem('theme');
        // Removed system preference check to ensure light mode is default
        
        if (savedTheme) {
            updateTheme(savedTheme === 'dark');
        } else {
            // Default to light mode if no preference is saved
            updateTheme(false); // false means light mode
        }

        // Toggle Handler
        themeToggle.addEventListener('click', () => {
            const currentTheme = html.classList.contains('dark') ? 'dark' : 'light';
            updateTheme(currentTheme === 'light');
        });

        // --- Routing and Navigation Logic ---
        
        const pageContainers = document.querySelectorAll('main > div[data-page]');
        const navLinks = document.querySelectorAll('.nav-link');
        
        function renderPage(targetPageId) {
            if (!isLoggedIn) return; // Guard: only route if logged in
            
            currentPage = targetPageId;
            
            // 1. Hide all pages and show target page
            pageContainers.forEach(page => {
                if (page.id === 'page-' + targetPageId) {
                    page.classList.remove('hidden');
                } else {
                    page.classList.add('hidden');
                }
            });

            // 2. Update active navigation link styling
            navLinks.forEach(link => {
                link.classList.remove('bg-blue-50', 'dark:bg-blue-900/50', 'text-blue-600', 'dark:text-blue-400');
                link.classList.add('text-gray-600', 'dark:text-gray-300', 'hover:bg-gray-50', 'dark:hover:bg-gray-700');
                
                if (link.dataset.target === targetPageId) {
                    link.classList.remove('text-gray-600', 'dark:text-gray-300', 'hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    link.classList.add('bg-blue-50', 'dark:bg-blue-900/50', 'text-blue-600', 'dark:text-blue-400');
                }
            });
            
            // 3. Run specific page setup
            if (targetPageId === 'expenses') {
                renderExpenses();
            } else if (targetPageId === 'dashboard') {
                updateDashboardMetrics();
                drawCharts(); 
            } else if (targetPageId === 'tools') {
                // Initialize all tools on the tools page
                updateNetWorthResult();
                calculateEMI();
                calculateSavingsGoal();
                calculateRetirement();
            }
            
            // Re-render Lucide icons for the new page content
            lucide.createIcons();
        }
        
        // Add listeners to navigation links
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = link.dataset.target;
                renderPage(target);
            });
        });
        
        // --- Expense Management Logic ---
        
        function renderExpenses() {
            const listBody = document.getElementById('transaction-list');
            const totalSpentEl = document.getElementById('total-spent');
            const highestExpenseEl = document.getElementById('highest-expense');
            const transactionCountEl = document.getElementById('transaction-count');
            const noTransactionsEl = document.getElementById('no-transactions');

            listBody.innerHTML = '';
            let totalSpent = 0;
            let highestExpense = 0;

            if (transactions.length === 0) {
                noTransactionsEl.classList.remove('hidden');
                totalSpentEl.textContent = '₹0.00';
                highestExpenseEl.textContent = '₹0.00';
                transactionCountEl.textContent = '0';
                return;
            }

            noTransactionsEl.classList.add('hidden');

            // Sort by date (newest first)
            transactions.sort((a, b) => new Date(b.date) - new Date(a.date));

            transactions.forEach(tx => {
                totalSpent += tx.amount;
                if (tx.amount > highestExpense) {
                    highestExpense = tx.amount;
                }

                const dateFormatted = new Date(tx.date).toLocaleDateString();
                const amountFormatted = tx.amount.toLocaleString('en-IN', { style: 'currency', currency: 'INR', minimumFractionDigits: 2 });
                
                // Categorize color for visual appeal
                let categoryColor;
                // Grouping is consistent with categoryMap for logical clarity in the app
                if (tx.category === 'Rent & Bills' || tx.category === 'Utilities') {
                    categoryColor = 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300';
                } else if (tx.category === 'Transport') {
                    categoryColor = 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300';
                } else if (tx.category === 'Food & Dining') {
                    categoryColor = 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300';
                } else {
                    categoryColor = 'bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300';
                }

                const row = document.createElement('tr');
                row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-600/50', 'transition');
                row.innerHTML = `
                    <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">${dateFormatted}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">${tx.description}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${categoryColor}">
                            ${tx.category}
                        </span>
                    </td>
                    <td class="px-4 py-3 whitespace-nowrap text-right text-sm font-bold text-red-600 dark:text-red-400">${amountFormatted}</td>
                `;
                listBody.appendChild(row);
            });

            totalSpentEl.textContent = totalSpent.toLocaleString('en-IN', { style: 'currency', currency: 'INR', minimumFractionDigits: 2 });
            highestExpenseEl.textContent = highestExpense.toLocaleString('en-IN', { style: 'currency', currency: 'INR', minimumFractionDigits: 2 });
            transactionCountEl.textContent = transactions.length;
            
            // Crucial: Update the dashboard metrics here as well, so they reflect the latest data
            if (currentPage === 'expenses') {
                updateDashboardMetrics();
            }
        }
        
        function handleAddExpense(event) {
            event.preventDefault();

            const amountInput = document.getElementById('expense-amount');
            const category = document.getElementById('expense-category').value;
            const description = document.getElementById('expense-description').value;
            const date = document.getElementById('expense-date').value;
            
            const amount = parseFloat(amountInput.value);

            if (isNaN(amount) || amount <= 0 || !description || !date) {
                console.error("Validation failed: Amount must be positive and all fields must be filled.");
                return; 
            }

            const newTransaction = {
                amount: amount,
                category: category,
                description: description,
                date: date
            };

            transactions.push(newTransaction);
            document.getElementById('expense-form').reset();
            document.getElementById('expense-date').value = new Date().toISOString().slice(0, 10);
            amountInput.focus();
            
            renderExpenses(); // Re-render the expense list
            
            if (currentPage === 'dashboard') {
                updateDashboardMetrics(); // Update dashboard metrics if on that page
                drawCharts(); // Redraw charts
            }
            
            showMessage("Success", `₹${amount.toLocaleString('en-IN')} added as a ${category} expense.`, 'bg-teal-600');
        }
        
        // --- Dashboard Update Logic ---

        function updateDashboardMetrics() {
            const totalSpending = calculateMonthlySpending();
            dashboardMonthlySpendingEl.innerHTML = `<span class="font-sans">₹</span>${totalSpending.toLocaleString('en-IN')}`;
        }

        // --- Tools Page Logic ---

        function formatToINR(value) {
            return `₹${Math.round(value).toLocaleString('en-IN')}`;
        }
        
        // Net Worth Calculator
        function updateNetWorthResult() {
            const assets = parseFloat(document.getElementById('tools-assets').value) || 0;
            const liabilities = parseFloat(document.getElementById('tools-liabilities').value) || 0;
            const netWorth = assets - liabilities;
            
            document.getElementById('net-worth-result').innerHTML = formatToINR(netWorth);
            document.getElementById('net-worth-details').textContent = `Assets: ${formatToINR(assets)} - Liabilities: ${formatToINR(liabilities)}`;
            
            const comparisonEl = document.getElementById('net-worth-comparison');
            if (netWorth >= 10000000) {
                comparisonEl.textContent = "Congratulations! You are in the top 1% for net worth in India.";
            } else if (netWorth >= 2500000) {
                comparisonEl.textContent = "You are in the top 10% for net worth in India. Great job!";
            } else {
                comparisonEl.textContent = "Keep building your assets to reach the next bracket!";
            }
        }
        
        // EMI Calculator
        function calculateEMI() {
            const p = parseFloat(document.getElementById('loan-amount').value) || 0;
            const annualRate = parseFloat(document.getElementById('interest-rate').value) || 0;
            const tenureYears = parseFloat(document.getElementById('loan-tenure').value) || 0;
            
            if (p <= 0 || annualRate <= 0 || tenureYears <= 0) return;

            const r = (annualRate / 100) / 12;
            const n = tenureYears * 12;
            
            const emi = (p * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
            const totalPayment = emi * n;
            const totalInterest = totalPayment - p;

            document.getElementById('emi-result').textContent = formatToINR(emi);
            document.getElementById('total-interest-result').textContent = formatToINR(totalInterest);
            document.getElementById('total-payment-result').textContent = formatToINR(totalPayment);
        }
        
        // Savings Goal Calculator
        function calculateSavingsGoal() {
            const goal = parseFloat(document.getElementById('goal-amount').value) || 0;
            const initial = parseFloat(document.getElementById('initial-savings').value) || 0;
            const monthly = parseFloat(document.getElementById('monthly-contribution').value) || 0;
            const annualReturn = parseFloat(document.getElementById('annual-return').value) || 0;

            if (goal <= initial) {
                 document.getElementById('savings-time-result').textContent = "Goal Reached!";
                 return;
            }
            if (monthly <= 0 || annualReturn <= 0) {
                 document.getElementById('savings-time-result').textContent = "∞";
                 return;
            }

            let currentAmount = initial;
            let months = 0;
            const monthlyReturnRate = (annualReturn / 100) / 12;

            while (currentAmount < goal) {
                currentAmount += monthly;
                currentAmount += currentAmount * monthlyReturnRate;
                months++;
                if (months > 1200) { // Safety break after 100 years
                    document.getElementById('savings-time-result').textContent = "Over 100 Yrs";
                    return;
                }
            }
            
            const years = Math.floor(months / 12);
            const remainingMonths = months % 12;
            document.getElementById('savings-time-result').textContent = `${years} yrs, ${remainingMonths} mos`;
        }
        
        // Retirement Calculator
        function calculateRetirement() {
            const currentAge = parseInt(document.getElementById('current-age').value) || 0;
            const retirementAge = parseInt(document.getElementById('retirement-age').value) || 0;
            const monthlyExpenses = parseFloat(document.getElementById('monthly-expenses').value) || 0;
            const existingCorpus = parseFloat(document.getElementById('existing-corpus').value) || 0;
            
            const inflation = 0.06;
            const preRetirementReturn = 0.08;
            
            if (currentAge >= retirementAge || monthlyExpenses <= 0) return;

            const yearsToRetirement = retirementAge - currentAge;
            const futureMonthlyExpenses = monthlyExpenses * Math.pow(1 + inflation, yearsToRetirement);
            // Simple rule: Corpus = 25 * Annual Expenses
            const requiredCorpus = futureMonthlyExpenses * 12 * 25;
            
            document.getElementById('retirement-corpus-result').textContent = formatToINR(requiredCorpus);
            
            // Calculate required SIP using future value formula
            const futureValueOfExisting = existingCorpus * Math.pow(1 + preRetirementReturn, yearsToRetirement);
            const shortfall = requiredCorpus - futureValueOfExisting;
            
            if (shortfall <= 0) {
                 document.getElementById('required-sip-result').textContent = "On Track!";
                 return;
            }

            const monthlyRate = preRetirementReturn / 12;
            const n = yearsToRetirement * 12;
            const requiredSIP = (shortfall * monthlyRate) / (Math.pow(1 + monthlyRate, n) - 1);
            
            document.getElementById('required-sip-result').textContent = formatToINR(requiredSIP);
        }
        
        // --- Chart.js Initialization ---
        
        function getChartTextColor() {
            return html.classList.contains('dark') ? '#9ca3af' : '#6b7280'; // gray-400 vs gray-500
        }
        
        function drawCharts() {
            if (spendingChartInstance) spendingChartInstance.destroy();
            if (historyChartInstance) historyChartInstance.destroy();

            const chartTextColor = getChartTextColor();
            const spendingData = calculateSpendingByCategory();
            const labels = Object.keys(spendingData);
            const dataValues = Object.values(spendingData);
            const colors = ['#6366f1', '#3b82f6', '#10b981', '#d1d5db'];

            spendingLegendEl.innerHTML = '';
            labels.forEach((label, index) => {
                const item = document.createElement('div');
                item.classList.add('flex', 'items-center', 'space-x-2');
                item.innerHTML = `
                    <div class="w-3 h-3 rounded-full" style="background-color: ${colors[index]}"></div>
                    <p>${label}<br><span class="text-xs text-gray-500 dark:text-gray-400">(${formatToINR(dataValues[index])})</span></p>
                `;
                spendingLegendEl.appendChild(item);
            });

            const spendingCtx = document.getElementById('spendingChart').getContext('2d');
            spendingChartInstance = new Chart(spendingCtx, {
                type: 'doughnut', data: { labels: labels, datasets: [{ label: 'Monthly Spending', data: dataValues, backgroundColor: colors, hoverOffset: 12, borderRadius: 5, spacing: 2, borderColor: html.classList.contains('dark') ? '#374151' : 'white', borderWidth: 2 }] },
                options: { responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `${c.label}: ${formatToINR(c.raw)}` } } } }
            });

            const historyCtx = document.getElementById('historyChart').getContext('2d');
            historyChartInstance = new Chart(historyCtx, {
                type: 'line', data: { labels: ['Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], datasets: [ { label: 'Earnings', data: [35000, 42000, 38000, 45000, 40000, 48000], borderColor: '#10b981', backgroundColor: 'rgba(16, 185, 129, 0.1)', tension: 0.4, fill: true }, { label: 'Spending', data: [15000, 18000, 16000, 20000, 18200, 22000], borderColor: '#ef4444', tension: 0.4, fill: false }, { label: 'Savings', data: [8000, 12000, 10000, 15000, 12000, 15000], borderColor: '#3b82f6', tension: 0.4, fill: false } ] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, grid: { color: chartTextColor + '33' }, ticks: { color: chartTextColor, callback: (v) => formatToINR(v) } }, x: { grid: { color: chartTextColor + '11' }, ticks: { color: chartTextColor } } }, plugins: { legend: { position: 'top', labels: { color: chartTextColor } }, tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${formatToINR(c.parsed.y)}` } } } }
            });
        }

        // --- W3.0 Coming Soon Logic ---

        document.getElementById('w30Button').addEventListener('click', () => {
            showMessage("Feature Status", "Web3.0 Integration - Coming Soon!", 'bg-gray-900');
        });

        // --- Document Ready Setup ---
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('show-signup').addEventListener('click', (e) => { e.preventDefault(); renderAuthView('signup'); });
            document.getElementById('show-login').addEventListener('click', (e) => { e.preventDefault(); renderAuthView('login'); });
            
            // Event Listeners for Tools
            const emiForm = document.getElementById('emi-form');
            emiForm.addEventListener('input', calculateEMI);
            
            const savingsForm = document.getElementById('savings-form');
            savingsForm.addEventListener('input', calculateSavingsGoal);
            
            const retirementForm = document.getElementById('retirement-form');
            retirementForm.addEventListener('input', calculateRetirement);
            
            document.getElementById('tools-assets').addEventListener('input', updateNetWorthResult);
            document.getElementById('tools-liabilities').addEventListener('input', updateNetWorthResult);
            
            // Initialize tools on load
            updateNetWorthResult();
            calculateEMI();
            calculateSavingsGoal();
            calculateRetirement();
            
            // Set default date for expense form
            document.getElementById('expense-date').value = new Date().toISOString().slice(0, 10);
            
            // Add form submission listeners
            document.getElementById('expense-form').addEventListener('submit', handleAddExpense);
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            document.getElementById('signup-form').addEventListener('submit', handleSignup);

            // Start on the login page
            toggleLoginStatus(false); 
        });
    </script>
</body>
</html>